(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{103:function(e,t,r){"use strict";r(93)},104:function(e,t,r){},105:function(e,t,r){},106:function(e,t,r){},110:function(e,t,r){"use strict";r(104)},111:function(e,t,r){"use strict";r(105)},112:function(e,t,r){"use strict";r(106)},115:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tags-input"},[r("app-input",e._b({on:{input:function(t){return e.$emit("change",e.currentTags)}},model:{value:e.currentTags,callback:function(t){e.currentTags=t},expression:"currentTags"}},"app-input",e.$props,!1)),r("ul",{staticClass:"tags-input__list"},e._l(e.tagsArray,(function(t,i){return t.trim()?r("li",{key:""+t+i,staticClass:"tags-input__item"},[r("tag",{attrs:{title:t,interactive:""},on:{click:function(r){return e.removeTag(t)}}})],1):e._e()})),0)],1)};i._withStripped=!0;var n=r(8),a=r.n(n),s=r(92),o={name:"app-tags-input",components:{Tag:r(94).a,AppInput:s.default},props:{tags:{type:String,default:""},title:{type:String,default:""},errorMessage:{type:String,default:""}},model:{prop:"tags",event:"change"},data:function(){return{currentTags:this.tags}},computed:{tagsArray:function(){return this.currentTags.split(",").map((function(e){return e.trim()}))}},methods:{removeTag:function(e){var t=a()(this.tagsArray),r=t.indexOf(e);r<0||(this.currentTags=t.filter((function(e,t){return t!==r})).join(", "),this.$emit("change",this.currentTags))}}},c=(r(111),r(20)),p=Object(c.a)(o,i,[],!1,null,null,null);p.options.__file="src/admin/components/app-tags-input/app-tags-input.vue";const l=p.exports;t.a=l;l.__docgenInfo={displayName:"app-tags-input",exportName:"default",description:"",tags:{},props:[{name:"v-model",description:"Задает первоначальное значение для v-model",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"title",description:"Название поля (label)",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"errorMessage",description:"Сообщение об ошибке",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"change",type:{names:["undefined"]}}]}},117:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",{attrs:{simple:""}},[r("div",{staticClass:"project",class:{"project--blocked":e.blocked}},[r("div",{staticClass:"project__preview",style:{backgroundImage:"url("+e.previewUrl+")"}},[r("div",{staticClass:"project__tags"},e._l(e.tagsList,(function(e,t){return r("tag",{key:t,staticClass:"project__tag",attrs:{title:e}})})),1)]),r("div",{staticClass:"project__content"},[r("h2",{staticClass:"project__title"},[e._v(e._s(e.title))]),r("p",{staticClass:"project__desc"},[e._v(e._s(e.description))]),r("a",{staticClass:"project__link",attrs:{href:e.link}},[e._v(e._s(e.link))]),r("div",{staticClass:"project__footer"},[r("app-icon",{staticClass:"project__button",attrs:{title:"править"},on:{click:function(t){return e.$emit("edit")}}}),r("app-icon",{staticClass:"project__button",attrs:{title:"удалить",symbol:"cross"},on:{click:function(t){return e.$emit("delete")}}})],1)])])])};i._withStripped=!0;var n=r(97),a=r(94),s={name:"app-project",components:{AppIcon:r(100).a,Tag:a.a,Card:n.a},props:{title:String,description:String,link:String,tags:String,photo:String,blocked:Boolean},computed:{tagsList:function(){return this.tags.split(",")},previewUrl:function(){return"".concat(this.$root.baseURL,"/").concat(this.photo)}}},o=(r(112),r(20)),c=Object(o.a)(s,i,[],!1,null,null,null);c.options.__file="src/admin/components/app-project/app-project.vue";const p=c.exports;t.a=p;p.__docgenInfo={displayName:"app-project",exportName:"default",description:"",tags:{},props:[{name:"title",type:{name:"string"}},{name:"description",type:{name:"string"}},{name:"link",type:{name:"string"}},{name:"tags",type:{name:"string"}},{name:"photo",type:{name:"string"}},{name:"blocked",type:{name:"boolean"}}],events:[{name:"edit"},{name:"delete"}]}},136:function(e,t,r){},137:function(e,t,r){},138:function(e,t,r){},160:function(e,t,r){"use strict";r(136)},161:function(e,t,r){"use strict";r(137)},162:function(e,t,r){"use strict";r(138)},168:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view-admin-page",[r("view-content",{attrs:{title:"Блок «Отзывы»"}},[e.showForm?r("app-review-form",{attrs:{review:e.editedReview,saving:e.reviewSaving},on:{cancel:e.closeForm,save:e.applyReview}}):e._e(),e.loading?r("h2",{staticClass:"loading"},[e._v("Загрузка...")]):r("ul",{staticClass:"projects"},[r("li",{staticClass:"projects__item"},[r("square-btn",{attrs:{type:"square",title:"Добавить отзыв"},on:{click:e.onNewReview}})],1),e._l(e.reviews,(function(t){return r("li",{key:t.id,staticClass:"projects__item"},[r("app-review",{attrs:{author:t.author,text:t.text,occ:t.occ,photo:t.photo,blocked:t.id===e.editedReview.id},on:{delete:function(r){return e.onDelete(t)},edit:function(r){return e.onEdit(t)}}})],1)}))],2)],1)],1)};i._withStripped=!0;var n=r(0),a=r.n(n),s=r(1),o=r.n(s),c=r(4),p=r.n(c),l=r(98),u=r(142),v=r(116),d=r(113),f=r(9),m=r(99),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",{attrs:{title:e.cardTitle}},[r("template",{slot:"content"},[r("form",{staticClass:"review-form",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("label",{staticClass:"review-form__photo"},[r("div",{staticClass:"review-form__preview",class:e.previewClassNames,style:e.previewStyles,on:{dragleave:function(t){e.hoveredOver=!1},dragover:function(t){t.preventDefault(),e.hoveredOver=!0},drop:function(t){return t.preventDefault(),e.loadPreview(t)}}},[r("div",{staticClass:"review-form__preview-overlay",domProps:{innerHTML:e._s("Отпускайте<br>для загрузки изображения")}})]),r("app-button",{staticClass:"review-form__upload",attrs:{plain:"",typeAttr:"file",title:"Добавить фото",accept:"image/*"},on:{change:e.loadPreview}})],1),r("app-input",{staticClass:"review-form__field",attrs:{title:"Имя автора","error-message":e.validation.firstError("author")},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}}),r("app-input",{staticClass:"review-form__field",attrs:{title:"Титул автора","error-message":e.validation.firstError("occ")},model:{value:e.occ,callback:function(t){e.occ=t},expression:"occ"}}),r("app-input",{staticClass:"review-form__field review-form__field--textarea",attrs:{title:"Отзыв",fieldType:"textarea","error-message":e.validation.firstError("text")},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),r("div",{staticClass:"review-form__footer"},[r("app-button",{staticClass:"review-form__button",attrs:{plain:"",title:"Отмена",typeAttr:"reset"},on:{click:e.onCancel}}),r("app-button",{staticClass:"review-form__button",attrs:{title:"Сохранить",typeAttr:"submit",disabled:e.saving}})],1)],1)])],2)};w._withStripped=!0;var h=r(42),g=r(97),_=r(96),b=r(95),y=r(115),x=r(100);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={name:"app-review-form",components:{Icon:x.a,AppTagsInput:y.a,AppInput:b.a,AppButton:_.a,Card:g.a},props:{review:{type:Object},saving:Boolean},validators:{author:function(e){return h.Validator.value(e).required("Имя не может быть пустым")},occ:function(e){return h.Validator.value(e).required("Титул не можнт быть пустым")},text:function(e){return h.Validator.value(e).required("Отзыв не может быть пустым")},photo:function(e){return h.Validator.value(e||this.preview).required("Добавьте фото")}},data:function(){return{hoveredOver:!1,id:this.review.id,preview:this.review.photo&&"".concat(this.$root.baseURL,"/").concat(this.review.photo),author:this.review.author,photo:null,occ:this.review.occ,text:this.review.text}},computed:{cardTitle:function(){return this.review.id?"Редактирование отзыва":"Новый отзыв"},previewClassNames:function(){return{"review-form__preview--hovered-over":this.hoveredOver,"review-form__preview--error":this.validation.hasError("photo")}},previewStyles:function(){return{backgroundImage:this.preview&&"url(".concat(this.preview,")"),backgroundSize:this.preview&&"cover"}}},methods:O(O({},Object(f.b)({showNotification:"notification/show"})),{},{loadPreview:function(e){var t=this,r=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];if(0===r.type.indexOf("image/")){var i=new FileReader;i.readAsDataURL(r),i.onload=function(){return t.preview=i.result},this.photo=r}else this.showNotification({type:"warning",text:"Загружать можно только файлы изображений"});this.hoveredOver=!1},onSubmit:function(e){var t=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validate();case 2:if(e.t0=e.sent,!1!==e.t0){e.next=5;break}return e.abrupt("return");case 5:t.$emit("save",{id:t.id,author:t.author,occ:t.occ,photo:t.photo,text:t.text});case 6:case"end":return e.stop()}}),e)})))()},onCancel:function(e){this.$emit("cancel")}})},k=(r(160),r(20)),S=Object(k.a)(C,w,[],!1,null,null,null);S.options.__file="src/admin/components/app-review-form/app-review-form.vue";const R=S.exports;var N=R;R.__docgenInfo={displayName:"app-review-form",exportName:"default",description:"",tags:{},props:[{name:"review",type:{name:"object"}},{name:"saving",type:{name:"boolean"}}],events:[{name:"save",type:{names:["undefined"]}},{name:"cancel"}]};var A=r(117),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",{staticClass:"review",class:{"review--blocked":e.blocked}},[r("template",{slot:"title"},[r("app-user",{attrs:{src:e.avatarUrl,size:"3.38"}},[r("div",[e._v(e._s(e.author))]),r("div",{staticClass:"review__occ"},[e._v(e._s(e.occ))])])],1),r("template",{slot:"content"},[r("div",{staticClass:"review__content"},[r("p",{staticClass:"review__desc"},[e._v(e._s(e.text))]),r("div",{staticClass:"review__footer"},[r("app-icon",{staticClass:"review__button",attrs:{title:"править"},on:{click:function(t){return e.$emit("edit")}}}),r("app-icon",{staticClass:"review__button",attrs:{title:"удалить",symbol:"cross"},on:{click:function(t){return e.$emit("delete")}}})],1)])])],2)};P._withStripped=!0;var $=r(94),T={name:"app-review",components:{AppUser:r(114).a,AppIcon:x.a,Tag:$.a,Card:g.a},props:{author:String,text:String,occ:String,photo:String,blocked:Boolean},computed:{avatarUrl:function(){return"".concat(this.$root.baseURL,"/").concat(this.photo)}}},E=(r(161),Object(k.a)(T,P,[],!1,null,null,null));E.options.__file="src/admin/components/app-review/app-review.vue";const D=E.exports;var I=D;function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}D.__docgenInfo={displayName:"app-review",exportName:"default",description:"",tags:{},props:[{name:"author",type:{name:"string"}},{name:"text",type:{name:"string"}},{name:"occ",type:{name:"string"}},{name:"photo",type:{name:"string"}},{name:"blocked",type:{name:"boolean"}}],events:[{name:"edit"},{name:"delete"}]};var V={id:0,author:"",occ:"",text:"",photo:null},B={name:"page-reviews",components:{AppReview:I,AppProject:A.a,AppReviewForm:N,SquareBtn:m.a,ViewAdminPage:d.a,ViewContent:v.a,AppCategory:u.a,IconedBtn:l.a},data:function(){return{loading:!1,showForm:!1,reviewSaving:!1,editedReview:V}},computed:q({},Object(f.c)({reviews:"reviews/reviews"})),methods:q(q({},Object(f.b)({createReviewAction:"reviews/create",editReviewAction:"reviews/edit",deleteReviewAction:"reviews/delete",fetchReviewsAction:"reviews/fetch",showNotification:"notification/show"})),{},{closeForm:function(){this.showForm=!1,this.editedReview=V},applyReview:function(e){var t=this;return o()(a.a.mark((function r(){var i,n,s,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(i=new FormData,n=0,s=Object.keys(e);n<s.length;n++)o=s[n],i.append(o,e[o]);if(t.reviewSaving=!0,r.prev=3,!e.id){r.next=10;break}return r.next=7,t.editReviewAction({formData:i,id:e.id});case 7:t.showNotification({type:"success",text:"Отзыв изменен"}),r.next=13;break;case 10:return r.next=12,t.createReviewAction(i);case 12:t.showNotification({type:"success",text:"Отзыв добавлен"});case 13:t.showForm=!1,r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),t.showNotification({type:"error",text:r.t0.message});case 19:return r.prev=19,t.reviewSaving=!1,t.editedReview=V,r.finish(19);case 23:case"end":return r.stop()}}),r,null,[[3,16,19,23]])})))()},onDelete:function(e){var t=this;return o()(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm('Вы уверены, что хотите удалить отзыв автор которого: "'.concat(e.author,'"?'))){r.next=14;break}return t.editedReview=e,r.prev=2,r.next=5,t.deleteReviewAction(e.id);case 5:t.showNotification({type:"success",text:"Отзыв удален"}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),t.showNotification({type:"error",text:r.t0.message});case 11:return r.prev=11,t.editedReview=V,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,8,11,14]])})))()},onEdit:function(e){if(this.showForm){var t=this.editedReview.id?"Завершите редактирование отзыва":"Завершите создание отзыва";this.showNotification({type:"warning",text:t})}else this.editedReview=e,this.showForm=!0},onNewReview:function(){if(this.showForm){var e=this.editedReview.id?"Завершите редактирование отзыва":"Завершите создание отзыва";this.showNotification({type:"warning",text:e})}else this.editedReview=V,this.showForm=!0}}),created:function(){var e=this;return o()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.fetchReviewsAction();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.showNotification({type:"error",text:t.t0.message});case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})))()}},U=(r(162),Object(k.a)(B,i,[],!1,null,null,null));U.options.__file="src/admin/pages/page-reviews.vue";const L=U.exports;t.default=L;L.__docgenInfo={displayName:"page-reviews",exportName:"default",description:"",tags:{}}},93:function(e,t,r){},94:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tag",class:{interactive:e.interactive}},[r("span",[e._v(e._s(e.title))]),e.interactive?r("button",e._g({staticClass:"remove",attrs:{type:"button"}},e.$listeners)):e._e()])};i._withStripped=!0;var n={props:{title:{type:String,default:""},interactive:Boolean}},a=(r(110),r(20)),s=Object(a.a)(n,i,[],!1,null,"77450145",null);s.options.__file="src/admin/components/tag/tag.vue";const o=s.exports;t.a=o;o.__docgenInfo={exportName:"default",displayName:"tag",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"interactive",type:{name:"boolean"}}]}},99:function(e,t,r){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("button",this._g({staticClass:"square-btn-component",attrs:{type:"button"}},this.$listeners),[t("div",{staticClass:"text"},[t("div",{staticClass:"sign"}),this._v(" "),t("div",{staticClass:"title"},[this._v(this._s(this.title))])])])};i._withStripped=!0;var n={props:{title:{type:String,default:"Добавить работу"}}},a=(r(103),r(20)),s=Object(a.a)(n,i,[],!1,null,"00e96a68",null);s.options.__file="src/admin/components/button/types/squareBtn/squareBtn.vue";const o=s.exports;t.a=o;o.__docgenInfo={exportName:"default",displayName:"squareBtn",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:'"Добавить работу"'}}]}}}]);