(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{103:function(t,e,r){"use strict";r(93)},104:function(t,e,r){},105:function(t,e,r){},106:function(t,e,r){},110:function(t,e,r){"use strict";r(104)},111:function(t,e,r){"use strict";r(105)},112:function(t,e,r){"use strict";r(106)},115:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tags-input"},[r("app-input",t._b({on:{input:function(e){return t.$emit("change",t.currentTags)}},model:{value:t.currentTags,callback:function(e){t.currentTags=e},expression:"currentTags"}},"app-input",t.$props,!1)),r("ul",{staticClass:"tags-input__list"},t._l(t.tagsArray,(function(e,n){return e.trim()?r("li",{key:""+e+n,staticClass:"tags-input__item"},[r("tag",{attrs:{title:e,interactive:""},on:{click:function(r){return t.removeTag(e)}}})],1):t._e()})),0)],1)};n._withStripped=!0;var i=r(8),o=r.n(i),a=r(92),s={name:"app-tags-input",components:{Tag:r(94).a,AppInput:a.default},props:{tags:{type:String,default:""},title:{type:String,default:""},errorMessage:{type:String,default:""}},model:{prop:"tags",event:"change"},data:function(){return{currentTags:this.tags}},computed:{tagsArray:function(){return this.currentTags.split(",").map((function(t){return t.trim()}))}},methods:{removeTag:function(t){var e=o()(this.tagsArray),r=e.indexOf(t);r<0||(this.currentTags=e.filter((function(t,e){return e!==r})).join(", "),this.$emit("change",this.currentTags))}}},c=(r(111),r(20)),p=Object(c.a)(s,n,[],!1,null,null,null);p.options.__file="src/admin/components/app-tags-input/app-tags-input.vue";const l=p.exports;e.a=l;l.__docgenInfo={displayName:"app-tags-input",exportName:"default",description:"",tags:{},props:[{name:"v-model",description:"Задает первоначальное значение для v-model",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"title",description:"Название поля (label)",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"errorMessage",description:"Сообщение об ошибке",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"change",type:{names:["undefined"]}}]}},117:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",{attrs:{simple:""}},[r("div",{staticClass:"project",class:{"project--blocked":t.blocked}},[r("div",{staticClass:"project__preview",style:{backgroundImage:"url("+t.previewUrl+")"}},[r("div",{staticClass:"project__tags"},t._l(t.tagsList,(function(t,e){return r("tag",{key:e,staticClass:"project__tag",attrs:{title:t}})})),1)]),r("div",{staticClass:"project__content"},[r("h2",{staticClass:"project__title"},[t._v(t._s(t.title))]),r("p",{staticClass:"project__desc"},[t._v(t._s(t.description))]),r("a",{staticClass:"project__link",attrs:{href:t.link}},[t._v(t._s(t.link))]),r("div",{staticClass:"project__footer"},[r("app-icon",{staticClass:"project__button",attrs:{title:"править"},on:{click:function(e){return t.$emit("edit")}}}),r("app-icon",{staticClass:"project__button",attrs:{title:"удалить",symbol:"cross"},on:{click:function(e){return t.$emit("delete")}}})],1)])])])};n._withStripped=!0;var i=r(97),o=r(94),a={name:"app-project",components:{AppIcon:r(100).a,Tag:o.a,Card:i.a},props:{title:String,description:String,link:String,tags:String,photo:String,blocked:Boolean},computed:{tagsList:function(){return this.tags.split(",")},previewUrl:function(){return"".concat(this.$root.baseURL,"/").concat(this.photo)}}},s=(r(112),r(20)),c=Object(s.a)(a,n,[],!1,null,null,null);c.options.__file="src/admin/components/app-project/app-project.vue";const p=c.exports;e.a=p;p.__docgenInfo={displayName:"app-project",exportName:"default",description:"",tags:{},props:[{name:"title",type:{name:"string"}},{name:"description",type:{name:"string"}},{name:"link",type:{name:"string"}},{name:"tags",type:{name:"string"}},{name:"photo",type:{name:"string"}},{name:"blocked",type:{name:"boolean"}}],events:[{name:"edit"},{name:"delete"}]}},134:function(t,e,r){},135:function(t,e,r){},158:function(t,e,r){"use strict";r(134)},159:function(t,e,r){"use strict";r(135)},169:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view-admin-page",[r("view-content",{attrs:{title:"Блок «Работы»"}},[t.showForm?r("app-project-form",{attrs:{project:t.editedProject,saving:t.projectSaving},on:{cancel:t.closeForm,save:t.applyProject}}):t._e(),t.loading?r("h2",{staticClass:"loading"},[t._v("Загрузка...")]):r("ul",{staticClass:"projects"},[r("li",{staticClass:"projects__item"},[r("square-btn",{attrs:{type:"square",title:"Добавить работу"},on:{click:t.onNewProject}})],1),t._l(t.projects,(function(e){return r("li",{key:e.id,staticClass:"projects__item"},[r("app-project",{attrs:{title:e.title,description:e.description,link:e.link,tags:e.techs,photo:e.photo,blocked:e.id===t.editedProject.id},on:{delete:function(r){return t.onDelete(e)},edit:function(r){return t.onEdit(e)}}})],1)}))],2)],1)],1)};n._withStripped=!0;var i=r(0),o=r.n(i),a=r(1),s=r.n(a),c=r(4),p=r.n(c),l=r(98),u=r(116),d=r(113),f=r(9),m=r(99),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("card",{attrs:{title:t.cardTitle}},[r("template",{slot:"content"},[r("form",{staticClass:"project-form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"project-form__box"},[r("label",{staticClass:"project-form__preview",class:t.previewClassNames,style:{backgroundImage:t.preview&&"url("+t.preview+")"},on:{dragleave:function(e){t.hoveredOver=!1},dragover:function(e){e.preventDefault(),t.hoveredOver=!0},drop:function(e){return e.preventDefault(),t.loadPreview(e)}}},[r("div",{staticClass:"project-form__preview-overlay"},[r("p",{staticClass:"project-form__notice",domProps:{innerHTML:t._s((t.hoveredOver?"Отпускайте":"Перетащите или загрузите")+"<br>для загрузки изображения")}}),r("app-button",{staticClass:"project-form__upload",attrs:{typeAttr:"file",title:"ЗАГРУЗИТЬ",accept:"image/*"},on:{change:t.loadPreview}})],1)])]),r("div",{staticClass:"project-form__box"},[r("app-input",{staticClass:"project-form__field",attrs:{title:"Название","error-message":t.validation.firstError("title")},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("app-input",{staticClass:"project-form__field",attrs:{title:"Ссылка","error-message":t.validation.firstError("link")},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),r("app-input",{staticClass:"project-form__field",attrs:{title:"Описание",fieldType:"textarea","error-message":t.validation.firstError("description")},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),r("app-tags-input",{staticClass:"project-form__field",attrs:{title:"Добавление тега","error-message":t.validation.firstError("techs")},model:{value:t.techs,callback:function(e){t.techs=e},expression:"techs"}}),r("div",{staticClass:"project-form__footer"},[r("app-button",{staticClass:"project-form__button",attrs:{plain:"",title:"Отмена",typeAttr:"reset"},on:{click:t.onCancel}}),r("app-button",{staticClass:"project-form__button",attrs:{title:"Сохранить",typeAttr:"submit",disabled:t.saving}})],1)],1)])])],2)};v._withStripped=!0;var h=r(42),g=r(97),j=r(96),_=r(95);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var y={name:"app-project-form",components:{AppTagsInput:r(115).a,AppInput:_.a,AppButton:j.a,Card:g.a},props:{project:{type:Object},saving:Boolean},validators:{title:function(t){return h.Validator.value(t).required("Название не может быть пустым")},link:function(t){return h.Validator.value(t).required("Ссылка не может быть пустой").url("Это не похоже на URL")},description:function(t){return h.Validator.value(t).required("Описание не может быть пустым")},techs:function(t){return h.Validator.value(t).required("Напишите пару используемых технологий через запятую")},photo:function(t){return h.Validator.value(t||this.preview).required("Добавьте фото")}},data:function(){return{hoveredOver:!1,id:this.project.id,preview:this.project.photo&&"".concat(this.$root.baseURL,"/").concat(this.project.photo),title:this.project.title,techs:this.project.techs,photo:null,link:this.project.link,description:this.project.description}},computed:{cardTitle:function(){return this.project.id?"Редактирование работы":"Создание работы"},previewClassNames:function(){return{"project-form__preview--hovered-over":this.hoveredOver,"project-form__preview--error":this.validation.hasError("photo")}}},methods:w(w({},Object(f.b)({showNotification:"notification/show"})),{},{loadPreview:function(t){var e=this,r=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0];if(0===r.type.indexOf("image/")){var n=new FileReader;n.readAsDataURL(r),n.onload=function(){return e.preview=n.result},this.photo=r}else this.showNotification({type:"warning",text:"Загружать можно только файлы изображений"});this.hoveredOver=!1},onSubmit:function(t){var e=this;return s()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validate();case 2:if(t.t0=t.sent,!1!==t.t0){t.next=5;break}return t.abrupt("return");case 5:e.$emit("save",{id:e.id,title:e.title,techs:e.techs,photo:e.photo,link:e.link,description:e.description});case 6:case"end":return t.stop()}}),t)})))()},onCancel:function(t){this.$emit("cancel")}})},k=(r(158),r(20)),O=Object(k.a)(y,v,[],!1,null,null,null);O.options.__file="src/admin/components/app-project-form/app-project-form.vue";const x=O.exports;var P=x;x.__docgenInfo={displayName:"app-project-form",exportName:"default",description:"",tags:{},props:[{name:"project",type:{name:"object"}},{name:"saving",type:{name:"boolean"}}],events:[{name:"save",type:{names:["undefined"]}},{name:"cancel"}]};var C=r(117);function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var A={id:0,title:"",link:"",description:"",photo:null,techs:""},T={name:"page-projects",components:{AppProject:C.a,AppProjectForm:P,SquareBtn:m.a,ViewAdminPage:d.a,ViewContent:u.a,IconedBtn:l.a},data:function(){return{loading:!1,showForm:!1,projectSaving:!1,editedProject:A}},computed:S({},Object(f.c)({projects:"projects/projects"})),methods:S(S({},Object(f.b)({createProjectAction:"projects/create",editProjectAction:"projects/edit",deleteProjectAction:"projects/delete",fetchProjectsAction:"projects/fetch",showNotification:"notification/show"})),{},{closeForm:function(){this.showForm=!1,this.editedProject=A},applyProject:function(t){var e=this;return s()(o.a.mark((function r(){var n,i,a,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=new FormData,i=0,a=Object.keys(t);i<a.length;i++)s=a[i],n.append(s,t[s]);if(e.projectSaving=!0,r.prev=3,!t.id){r.next=10;break}return r.next=7,e.editProjectAction({formData:n,id:t.id});case 7:e.showNotification({type:"success",text:"Работа изменена"}),r.next=13;break;case 10:return r.next=12,e.createProjectAction(n);case 12:e.showNotification({type:"success",text:"Работа добавлена"});case 13:e.showForm=!1,r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),e.showNotification({type:"error",text:r.t0.message});case 19:return r.prev=19,e.projectSaving=!1,e.editedProject=A,r.finish(19);case 23:case"end":return r.stop()}}),r,null,[[3,16,19,23]])})))()},onDelete:function(t){var e=this;return s()(o.a.mark((function r(){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm('Вы уверены, что хотите удалить работу: "'.concat(t.title,'"?'))){r.next=14;break}return e.editedProject=t,r.prev=2,r.next=5,e.deleteProjectAction(t.id);case 5:e.showNotification({type:"success",text:"Работа удалена"}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),e.showNotification({type:"error",text:r.t0.message});case 11:return r.prev=11,e.editedProject=A,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,8,11,14]])})))()},onEdit:function(t){if(this.showForm){var e=this.editedProject.id?"Завершите редактирование работы":"Завершите создание работы";this.showNotification({type:"warning",text:e})}else this.editedProject=t,this.showForm=!0},onNewProject:function(){if(this.showForm){var t=this.editedProject.id?"Завершите редактирование работы":"Завершите создание работы";this.showNotification({type:"warning",text:t})}else this.editedProject=A,this.showForm=!0}}),created:function(){var t=this;return s()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.fetchProjectsAction();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t.showNotification({type:"error",text:e.t0.message});case 9:return e.prev=9,t.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))()}},$=(r(159),Object(k.a)(T,n,[],!1,null,null,null));$.options.__file="src/admin/pages/page-projects.vue";const E=$.exports;e.default=E;E.__docgenInfo={displayName:"page-projects",exportName:"default",description:"",tags:{}}},93:function(t,e,r){},94:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tag",class:{interactive:t.interactive}},[r("span",[t._v(t._s(t.title))]),t.interactive?r("button",t._g({staticClass:"remove",attrs:{type:"button"}},t.$listeners)):t._e()])};n._withStripped=!0;var i={props:{title:{type:String,default:""},interactive:Boolean}},o=(r(110),r(20)),a=Object(o.a)(i,n,[],!1,null,"77450145",null);a.options.__file="src/admin/components/tag/tag.vue";const s=a.exports;e.a=s;s.__docgenInfo={exportName:"default",displayName:"tag",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"interactive",type:{name:"boolean"}}]}},99:function(t,e,r){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("button",this._g({staticClass:"square-btn-component",attrs:{type:"button"}},this.$listeners),[e("div",{staticClass:"text"},[e("div",{staticClass:"sign"}),this._v(" "),e("div",{staticClass:"title"},[this._v(this._s(this.title))])])])};n._withStripped=!0;var i={props:{title:{type:String,default:"Добавить работу"}}},o=(r(103),r(20)),a=Object(o.a)(i,n,[],!1,null,"00e96a68",null);a.options.__file="src/admin/components/button/types/squareBtn/squareBtn.vue";const s=a.exports;e.a=s;s.__docgenInfo={exportName:"default",displayName:"squareBtn",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:'"Добавить работу"'}}]}}}]);